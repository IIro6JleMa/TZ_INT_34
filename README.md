# TZ_INT_4 Выполнил работу Красников Максим Дмитриевич.
Документация по тестированию выполненного тестового задания в отдел INT_4.
________________________________________________________________________________________________________________________
Ansible :
1) Все папки перенесите на основную машину, с которой будет осуществляться запуск playbook;
2) Проверьте ваше окружение :
   2.1 установлен ли у вас ansbile;
   2.2 установлен ли у вас python;
   2.3 установлен ли у вас sshpass для передачи пароля по ssh;
   2.4 также обратите внимание на все остальные менее важные моменты в установленном окружении;
3) Запустите сервер №2, на котором будет содержаться версия Debian 10. (Я использовал : debian-10.13.0-amd.64-netinst.iso). Сссылка на образ : https://cdimage.debian.org/mirror/cdimage/archive/10.13.0/amd64/iso-cd/
4) Далее на сервере №2 необходимо установить ssh и разрешить подключение по паролю, если оно вдруг запрещено;
5) После того, как вы убедились в ваших данных для пользователя то файле hosts.ini укажите ip-адресс вашего сервера №2, а также другие необходимые данные в виде пароля, имени пользователя и пароля для рута.
6) Если не возникло проблем с пунктами выше, то выполните команду : sudo ansible-playbook -i hosts.ini playbook.yml, после которой плейбук будет запущен.
*Комментарий : прошу заметить, что в конфигурирование сервера я также добавил установку Firewall, Fail2ban для того, чтобы исключить возможность атаки со стороны подключения.*
__________________________________________________________________________________________________________________________
CI-CD :
1) Все необходимые файлы перенесите на машину, с которой будет осуществляться запуск docker-compose и контейнеров;
2) Убедитесь, что у вас установлены следующие компоненты :
   2.1 Docker;
   2.2 Docker-compose;
   2.3 Python.
Это минимальный набор того, что должно быть установлено.
3) Проверьте доступность вашего порта 8080. Если будет необходимо, то выполните kill -9 <PID>, а PID возьмёте из команды lsof -i :порт.
4) После проверки вышеуказанных пунктов можете осуществлять запуск docker-compose командой : sudo docker-compose up --build.
5) Проверка работоспособности сервера : curl http://localhost:8080/healthz, либо curl -X GET http://localhost:8080/healthz. Соответсвенно в ответе должно выдать : 200 OK.
___________________________________________________________________________________________________________________________
Monitoring :
1) Все необходимые файлы перенесите на машину, с которой будет осуществляться запуск docker-compose и контейнеров;
2) Убедитесь, что у вас установлены следующие компоненты :
   2.1 Docker;
   2.2 Docker-compose;
   2.3 Python.
Это минимальный набор того, что должно быть установлено;
3) Проверьте доступность портов 9091, 9115, 3000. Если какой-то занят, то выполните указания, как в *CI-CD пункт 3*;
4) Далее с помощью команды : sudo docker-compose up --build, запускайте докер;
5) Если не возникло ошибок, то переходите в браузере по ссылке http://localhost:3000 (по умол. логин - admin, пароль, как в docker-compose - maks, если нужно, то поменяйте);
6) Далее меняйте пароль на тот, который будет постоянным;
7) После чего переходите в меню и dashboards, выбирайте тот, который уже есть там. Метрики вам видны, всё выводится.
*Комментарий : прошу заметить, что метрики выводятся раз в 10 сек, поэтому стоит немного подождать, чтобы увидеть всю необходимую картину*
____________________________________________________________________________________________________________________________
Ps : в целом, были развёрнуты все данные тестовые задания и было всё проверено вдоль и поперёк. Надеюсь, что и у вас при проверке моей работы проблем не возникнет.
